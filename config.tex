% Packages
\usepackage[english]{babel}
\usepackage[T1]{fontenc}
\usepackage{graphicx}
\usepackage[a4paper, margin=2.5cm]{geometry}
\usepackage{lipsum} % Lorem ipsum text
\usepackage{etoolbox} % For patching commands
\usepackage{titlesec} % Section/part formatting
\usepackage{fancyhdr} % Custom headers/footers
\usepackage{tocloft}  % Table of contents settings
\usepackage[style=ieee]{biblatex} % Citations
\usepackage{csquotes}
\usepackage{siunitx} % SI units
\usepackage{parskip}
\usepackage{tikz} % Diagrams
\usepackage[font=bf]{caption}
\usepackage{float}


% Global variables
\newcommand{\myName}{Adam Sidnell}
\newcommand{\mySupervisor}{Professor Ruzanna Chitchyan}
\newcommand{\mySubmissionMonthYear}{September 2025}
\newcommand{\myReportTitle}{[TBD: NAME OF TOOL]}
\newcommand{\myReportSubtitle}{TBD: A tool to study microclimates in an orchard}
\newcommand{\wordCount}{TBD}
\newcommand{\farmName}{Small Brook Farm}
\newcommand{\farmLocation}{Devon}

% Section formatting
\titleformat{\section}{\normalfont\LARGE\bfseries}{\thesection}{1em}{}
\titlespacing*{\section}{0pt}{0pt}{0.5cm}

% Header/footer setup
\pagestyle{fancy}
\fancyhf{}
\fancyhead[R]{\small \leftmark}
\fancyfoot[C]{\thepage}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\sectionmark}[1]{\markboth{\thesection\ \MakeUppercase{#1}}{}}

% Custom plain page style for section-start, part, contents and other pages
\fancypagestyle{plain}{
  \fancyhf{}
  \fancyfoot[C]{\thepage}
  \renewcommand{\headrulewidth}{0pt}
}

% Clear page & vertical space before sections
\makeatletter
\pretocmd{\section}{\clearpage\vspace*{3cm}\thispagestyle{plain}}{}{}
\makeatother

% Part page formatting (centred on page, "part" smaller than "name")
\titleformat{\part}[display]
{\normalfont\centering\bfseries}
{\vfill \LARGE \partname\ \thepart}
{1em}
{\Huge }
[
  \vfill
  \thispagestyle{plain}
  \clearpage
]

% Dotted lines in contents
\renewcommand{\cftsecleader}{\cftdotfill{\cftdotsep}}

% Bibliography file
\addbibresource{references.bib}

% Contents title and formatting
\addto\captionsenglish{\renewcommand{\contentsname}{Table of contents}}
\renewcommand{\cfttoctitlefont}{\LARGE\bfseries}
\setlength{\cftaftertoctitleskip}{2cm}

% Smaller paragraphs
\titleformat{\paragraph}
  {\normalfont\normalsize\bfseries}  
  {\theparagraph} 
  {1em} 
  {}  
\titlespacing*{\paragraph}{0pt}{1.5ex plus 0.5ex minus .2ex}{1ex plus .2ex}

% Smaller indented subparagraphs
\titleformat{\subparagraph}
  {\normalfont\small\bfseries}
  {\thesubparagraph}
  {1em}
  {}
\titlespacing*{\subparagraph}{1.5em}{1ex plus .2ex}{0.5ex plus .1ex}
