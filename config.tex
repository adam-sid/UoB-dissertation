% Packages
\usepackage[english]{babel}
\usepackage[T1]{fontenc}
\usepackage{graphicx}
\usepackage[a4paper, margin=2.5cm]{geometry}
\usepackage{lipsum} % Lorem ipsum text
\usepackage{etoolbox} % For patching commands
\usepackage{titlesec} % Section/part formatting
\usepackage{fancyhdr} % Custom headers/footers
\usepackage{tocloft}  % Table of contents settings
\usepackage[style=ieee]{biblatex} % Citations
\usepackage{csquotes}
\usepackage{siunitx} % SI units
\usepackage{parskip}

% Global variables
\newcommand{\myName}{Adam Sidnell}
\newcommand{\mySupervisor}{Professor Ruzanna Chitchyan}
\newcommand{\mySubmissionMonthYear}{September 2025}
\newcommand{\myReportTitle}{[TBD: NAME OF TOOL]}
\newcommand{\myReportSubtitle}{TBD: A tool to study microclimates in an orchard}
\newcommand{\wordCount}{TBD}
\newcommand{\farmName}{Small Brook Farm}
\newcommand{\farmLocation}{Devon}

% Section formatting
\titleformat{\section}{\normalfont\LARGE\bfseries}{\thesection}{1em}{}
\titlespacing*{\section}{0pt}{0pt}{0.5cm}

% Header/footer setup
\pagestyle{fancy}
\fancyhf{}
\fancyhead[R]{\leftmark}
\fancyfoot[C]{\thepage}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\sectionmark}[1]{\markboth{\thesection\ \MakeUppercase{#1}}{}}

% Custom section-start page style (no header)
\fancypagestyle{sectionstart}{
  \fancyhf{}
  \fancyfoot[C]{\thepage}
  \renewcommand{\headrulewidth}{0pt}
}

% Clear page & vertical space before sections
\makeatletter
\pretocmd{\section}{\clearpage\vspace*{3cm}\thispagestyle{sectionstart}}{}{}
\makeatother

% Part page formatting (centred on page, "part" smaller than "name")
\titleformat{\part}[display]
{\normalfont\centering\bfseries}
{\vfill \LARGE \partname\ \thepart}
{1em}
{\Huge }
[
  \vfill
  \thispagestyle{partpage}
  \clearpage
]

% Custom part page style
\fancypagestyle{partpage}{
  \fancyhf{}
  \fancyfoot[C]{\thepage}
  \renewcommand{\headrulewidth}{0pt}
}

% Dotted lines in contents
\renewcommand{\cftsecleader}{\cftdotfill{\cftdotsep}}

% Bibliography file
\addbibresource{references.bib}

% Contents title
\addto\captionsenglish{\renewcommand{\contentsname}{Table of Contents}}
