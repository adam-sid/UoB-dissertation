\section{Deployment}\label{sec:deployment}

Before setting up the nodes at the farm it was important to run the equipment in
an area where repairs and updates could be more easily performed. The nodes were
therefore placed at different locations in my garden and ran continuously from
the 15th of August.

\subsection{Challenges and solutions from test deployment}

\subsubsection{Battery capacity}

An initial challenge identified during the test deployment was that the battery
capacity on the sensor nodes was insufficient for continuous 24/7 operation.
This became evident on the fourth day of the deployment when, following an
overcast evening, one node ceased transmitting at approximately 6:00 AM due to
power depletion.

To resolve this, the battery capacity on each sensor node was doubled by adding
a second battery. The repeater node did not require this upgrade due to its
lower power consumption. Post-upgrade, monitoring of the battery voltage
confirmed that the existing solar panels were sufficient to fully recharge both
batteries by early afternoon each day. This modification proved largely
effective, although there were two more losses of power during the night even
after the upgrade. Performance of batteries is explored more in Section
\ref{sec:hardware-evaluation-power}.

\subsubsection {Behaviour on loss of power}

A related problem was that when the node died it did not start working again
after power was restored. I discovered that when the microcontroller detected a
brownout - a sudden dip in voltage - the device would enter a safeboot mode. In
this safeboot mode the default code.py file would not automatically be run and
instead the device would create and use a safemode.py file that would
essentially run indefinitely unless the reset button on the device was pressed
or the device was powered off and on again.

Clearly this behaviour was not appropriate for field deployment where brownouts
would potentially occur whenever the battery was discharged completely. Even
with the additional battery capacity provided by a second battery there would
still be a high chance of this occurring on particularly dark days during
winter, where continuous uptime could not be guaranteed.

To remedy this, I modified the safemode.py file using a template I found in the
CircuitPython documentation \cite{halbert2023safemode}. This version of the
safemode.py file was made specifically for the case I was using i.e. remote
solar powered projects where a manual reset of the board could not be achieved
easily. Instead of entering an infinite loop this safemode is designed to enter
a low power mode for a short period and then try to cycle power back on.

Disappointingly, the addition of this new safemode was not reliable and
occasionally the device would enter a state where a hard manual reset was
necessary. This problem is discussed further in Section
\ref{sec:reset-behaviour}.

\subsubsection{Temperature-humidity sensor behaviour in sun}

A separate issue was the behaviour of the temperature-humidity sensor when
exposed to direct sunlight. While the junction box used to encase the sensor was
painted white to reduce any heat transfer from solar radiation, the readings
taken on very sunny days showed a large delta of around 5 celsius between the
sensor readings and local air temperature readings that could not be explained
with the existence of a microclimate.

To reduce this effect an additional solar shield consisted of a wooden frame and
aluminium shield was made. This was positioned to surround the sensor to
block light falling directly on the junction box. This reduced the delta to a
negligible amount.
