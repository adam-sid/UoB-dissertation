\section{Programming the hardware}

The challenger boards can be programmed in a few different languages. The most
common of these are C (including C++) and python. I decided to program the
boards in python due to the large availability of sensor libraries written in
this language. Programming in C, while potentially more efficient, would likely
have meant I would need to write my own libraries and functions to get many of
the sensors to function properly and therefore was not selected.

The RP2040 processor of the challenger uses relatively low power, so the
versions of python for the chip tend to be stripped down to accommodate this.
The two main python versions available are circuit python and micropython. They
both have extensive libraries and work with all the sensors I have selected.
With no major difference in their functionality, I settled on circuitpython as
this was the version recommended by iLabs (the makers of the challenger board)
and included a library that supports challenger as well as example code.

\subsubsection{The nodes}

\subsubsection{The repeater}

\subsubsection{The gateway}

\subsection{LoRa settings configuration}

The most fundamental part of the program for each of the nodes in the LoRa
network was that they could communicate with each other. This required the
careful matching of LoRa configuration settings between them.

  {ADD LoRa settings}

LoRa has many parameters that must be aligned for two devices to communicate
successfully. These include:

\begin{enumerate}
  \item \textbf{Spreading factor:}
  \item \textbf{Frequency:} Must match across devices; this project uses
        868\,MHz, the UK LoRa ISM band.
  \item \textbf{Bandwidth:} Determines how wide the signal is, I am using
        125\,kHz.
  \item \textbf{Coding rate:}
  \item \textbf{Transmit power:} Affects the power and therefore range. This
        must be set within legal limits (e.g., 14\,dBm in the UK).
\end{enumerate}

\subsubsection{Compliance with regulatory limits on radio power}\label{sec:lora-limit}

The UK has strict regulations on the usage of radio transmitters under the Ofcom
ISM band rules. For the 868mhz band, the maximum effective radiated power that
can be used is 25mW. This corresponds to a transmit power of roughly 14dB.

Additionally, the UK has rules on duty cycle rates. This is essentially how long
radio signals are permitted to be on air. For example at a spreading factor of
12 a message may take approximately 1 second to send. The duty cycle limit in
the UK is 1\%, meaning you may only transmit for 1\% of the time on a given day.
1\% of a day is 864 seconds. This means to stay in line with UK regulations only
864 messages could be sent on a given day - or roughly 1 message every 2
minutes.


\subsection{Sensor nodes}

\subsection{Repeater}

\subsection{Gateway}

\subsection{Remote diagnostics and error handling}

Since all the sensors would not be accessible easily errors needed to be
reported remotely to diagnose faults and problems. Unfortunately, while the
sensor nodes and repeater are technically network connected with LoRa there is
no easy way to send firmware updates over the air without developing a program
to accept and create new files over LoRa (FACT CHECK THAT), which was outside
the scope of a three month dissertation. Therefore instead the nodes would need
to have robust error handling written into their programs.

Diagnostics on the gateway node was luckily much simpler as this was powered on
24/7 and network connected. (EXPLANATION OF TAILWIND AND RVC VIEWER)
